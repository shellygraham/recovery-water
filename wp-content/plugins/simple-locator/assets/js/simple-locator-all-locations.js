jQuery(function(e){function o(){var e,o,n=wpsl_locator_all.locations,t=wpsl_locator.mapstyles,a=wpsl_locator.mappin?wpsl_locator.mappin:"",l=new google.maps.LatLngBounds,p={mapTypeId:"roadmap",mapTypeControl:!1,zoom:8,styles:t,panControl:!1},s=new google.maps.InfoWindow,i=new google.maps.Map(document.getElementById("alllocationsmap"),p);for(o=0;o<n.length;o++){var r=new google.maps.LatLng(n[o].latitude,n[o].longitude);l.extend(r);var e=new google.maps.Marker({position:r,map:i,title:n[o].title,icon:a});google.maps.event.addListener(e,"click",function(e,o){return function(){s.setContent("<h4>"+n[o].title+'</h4><p><a href="'+n[o].permalink+'">'+wpsl_locator.viewlocation+"</a></p>"),s.open(i,e)}}(e,o)),i.fitBounds(l);var g=google.maps.event.addListener(i,"idle",function(){n.length<2&&i.setZoom(13),google.maps.event.removeListener(g)})}var m=google.maps.event.addListener(i,"bounds_changed",function(){google.maps.event.removeListener(m)})}e(document).ready(function(){o()})});